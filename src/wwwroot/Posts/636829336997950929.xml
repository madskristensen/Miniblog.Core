<?xml version="1.0" encoding="utf-8"?>
<post>
  <title>ClickOnce Deployment and Visual Studio 2008 (A Small Gotcha)</title>
  <slug>clickonce-deployment-and-visual-studio-2008-a-small-gotcha</slug>
  <pubDate>2012-03-31T23:46:00.000Z</pubDate>
  <lastModified>2019-01-12T23:48:19.795Z</lastModified>
  <excerpt />
  <content>&lt;p class="MsoNormal" style="margin: 0in 0in 10pt;"&gt;&lt;font size="3"&gt;&lt;font color="#000000"&gt;&lt;font face="Calibri"&gt;&lt;b style="mso-bidi-font-weight: normal;"&gt;&lt;a href="http://www.bacardibryant.com/Posts/files/image001_636829336974047667.gif"&gt;&lt;img title="image001" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" border="0" alt="image001" src="http://www.bacardibryant.com/Posts/files/image001_thumb_636829336975506489.gif" width="436" height="146" /&gt;&lt;/a&gt;&lt;/b&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;  &lt;p class="MsoNormal" style="margin: 0in 0in 10pt;"&gt;&lt;font size="3"&gt;&lt;font color="#000000"&gt;&lt;font face="Calibri"&gt;&lt;b style="mso-bidi-font-weight: normal;"&gt;ClickOnce&lt;/b&gt; is a great new feature in Windows application development that provides a simple application deployment and update model. While it isn’t the most comprehensive and robust solution, I find that it works for deploying and updating small scaled applications. However, I did find one issue that could easily be overlooked and cause your updates to fail.&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;  &lt;p&gt;&lt;a href="http://www.bacardibryant.com/Posts/files/image002_636829336976898926.png"&gt;&lt;img title="image002" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" border="0" alt="image002" src="http://www.bacardibryant.com/Posts/files/image002_thumb_636829336978798179.png" width="507" height="214" /&gt;&lt;/a&gt;&lt;/p&gt;  &lt;p class="MsoNormal" style="margin: 0in 0in 10pt;"&gt;&lt;font color="#000000" size="3" face="Calibri"&gt;In toying around with one of my applications, I began to receive the “&lt;b style="mso-bidi-font-weight: normal;"&gt;DeploymentDownloadException&lt;/b&gt;” exception. Upon reading further into the details, I found that my &lt;b style="mso-bidi-font-weight: normal;"&gt;IIS Server&lt;/b&gt; was returning the &lt;b style="mso-bidi-font-weight: normal;"&gt;HTTP Error Code: 404&lt;/b&gt; (file not found).&lt;/font&gt;&lt;/p&gt;  &lt;p&gt;&lt;a href="http://www.bacardibryant.com/Posts/files/image004_636829336980327198.png"&gt;&lt;img title="image004" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" border="0" alt="image004" src="http://www.bacardibryant.com/Posts/files/image004_thumb_636829336982795443.png" width="513" height="216" /&gt;&lt;/a&gt;&lt;/p&gt;  &lt;p class="MsoNormal" style="margin: 0in 0in 10pt;"&gt;&lt;font color="#000000" size="3" face="Calibri"&gt;So I opened the project’s properties page to confirm the upload and deployment locations; they were fine. Then I launched &lt;b style="mso-bidi-font-weight: normal;"&gt;FileZilla&lt;/b&gt; (ftp client), to view the directories and found that the &lt;b style="mso-bidi-font-weight: normal;"&gt;Publish&lt;/b&gt; from &lt;b style="mso-bidi-font-weight: normal;"&gt;VisualStudio&lt;/b&gt; had run successfully because the files had been uploaded.&lt;/font&gt;&lt;/p&gt;  &lt;p&gt;&lt;a href="http://www.bacardibryant.com/Posts/files/image006_636829336986670125.png"&gt;&lt;img title="image006" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" border="0" alt="image006" src="http://www.bacardibryant.com/Posts/files/image006_thumb_636829336991547174.png" width="535" height="391" /&gt;&lt;/a&gt;&lt;/p&gt;  &lt;p class="MsoNormal" style="margin: 0in 0in 10pt;"&gt;&lt;font color="#000000" size="3" face="Calibri"&gt;Puzzled, I went back to the error dialog, and read the detailed error message again. I discovered that the &lt;b style="mso-bidi-font-weight: normal;"&gt;.application&lt;/b&gt; file was not found and couldn’t begin to understand why it wasn’t uploaded.&lt;/font&gt;&lt;/p&gt;  &lt;p class="MsoNormal" style="margin: 0in 0in 10pt;"&gt;&lt;font color="#000000" size="3" face="Calibri"&gt;Because the updates for this particular application had worked fine before, I knew that it must be something involving my last actions. So, what was my approach to solving this issue you ask?&lt;/font&gt;&lt;/p&gt;  &lt;p class="MsoNormal" style="margin: 0in 0in 10pt;"&gt;&lt;font color="#000000" size="3" face="Calibri"&gt;Well, to use the highly effective and scientifically mystical “&lt;b style="mso-bidi-font-weight: normal;"&gt;think back or re-trace your steps&lt;/b&gt;” method of course.&lt;/font&gt;&lt;/p&gt;  &lt;p class="MsoNormal" style="margin: 0in 0in 10pt;"&gt;&lt;font color="#000000" size="3" face="Calibri"&gt;The problem…&lt;/font&gt;&lt;/p&gt;  &lt;p&gt;&lt;a href="http://www.bacardibryant.com/Posts/files/image008_636829336993393986.png"&gt;&lt;img title="image008" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" border="0" alt="image008" src="http://www.bacardibryant.com/Posts/files/image008_thumb_636829336996139722.png" width="531" height="562" /&gt;&lt;/a&gt;&lt;/p&gt;  &lt;p class="MsoNormal" style="margin: 0in 0in 10pt;"&gt;&lt;font size="3"&gt;&lt;font color="#000000"&gt;&lt;font face="Calibri"&gt;By default, the &lt;b style="mso-bidi-font-weight: normal;"&gt;Publish Wizard&lt;/b&gt; in &lt;b style="mso-bidi-font-weight: normal;"&gt;VisualStudio&lt;/b&gt; saves &lt;b style="mso-bidi-font-weight: normal;"&gt;ClickOnce&lt;/b&gt; applications with the &lt;b style="mso-bidi-font-weight: normal;"&gt;.application&lt;/b&gt; &lt;b style="mso-bidi-font-weight: normal;"&gt;extension&lt;/b&gt; appended. However, the &lt;b style="mso-bidi-font-weight: normal;"&gt;Publish&lt;/b&gt; feature in the &lt;b style="mso-bidi-font-weight: normal;"&gt;Properties&lt;/b&gt; dialog allows you to save the application files with a &lt;b style="mso-bidi-font-weight: normal;"&gt;.deploy extension&lt;/b&gt;. Well if you publish your application using the Properties dialog with the “&lt;b style="mso-bidi-font-weight: normal;"&gt;use .deploy extension&lt;/b&gt;” option checked, and then publish a later revision using the &lt;b style="mso-bidi-font-weight: normal;"&gt;Publish Wizard&lt;/b&gt;, then on attempting to update the application, the server will return an &lt;b style="mso-bidi-font-weight: normal;"&gt;HTTP 404 error&lt;/b&gt;. &lt;b style="mso-bidi-font-weight: normal;"&gt;This is because your original dll has the .deploy extension appended to it and not the .applicatIon extension that the Publish Wizard added.&lt;/b&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;  &lt;p class="MsoNormal" style="margin: 0in 0in 10pt;"&gt;&lt;font color="#000000" size="3" face="Calibri"&gt;The solution…this is really tricky, so pay close attention:&lt;/font&gt;&lt;/p&gt;  &lt;p class="MsoNormal" style="margin: 0in 0in 10pt;"&gt;&lt;b style="mso-bidi-font-weight: normal;"&gt;&lt;font size="3"&gt;&lt;font color="#000000"&gt;&lt;font face="Calibri"&gt;Don’t combine the publishing methods.&lt;span style="mso-spacerun: yes;"&gt;&amp;#160; &lt;/span&gt;If you use the Publish Wizard to start, always use it; if you use the Properties form with the “use .deploy extension” selected, then always use the properties form. &lt;!--?xml:namespace prefix = o ns = "urn:schemas-microsoft-com:office:office" /--&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/b&gt;&lt;/p&gt;  &lt;p class="MsoNormal" style="margin: 0in 0in 10pt;"&gt;&lt;font color="#000000" size="3" face="Calibri"&gt;Oh, and to fix and existing issue, simply published again using the original method and the application will be back on track.&lt;/font&gt;&lt;/p&gt;  &lt;p class="MsoNormal" style="margin: 0in 0in 10pt;"&gt;&lt;font color="#000000" size="3" face="Calibri"&gt;Happy ClickOnce’ing!&lt;/font&gt;&lt;/p&gt;</content>
  <ispublished>true</ispublished>
  <categories>
    <category>programming</category>
    <category>visual studio</category>
  </categories>
  <comments></comments>
</post>